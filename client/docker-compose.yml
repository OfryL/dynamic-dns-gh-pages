version: '3.8'

services:
  dynamic-dns:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: dynamic-dns-client
    restart: unless-stopped
    environment:
      - POLL_INTERVAL_MINUTES=${POLL_INTERVAL_MINUTES:-15}
      - IP_API_URL=${IP_API_URL:-https://api.ipify.org?format=json}
      - GIT_USER_NAME=${GIT_USER_NAME:-Dynamic DNS Bot}
      - GIT_USER_EMAIL=${GIT_USER_EMAIL:-bot@dynamic-dns.local}
    volumes:
      - ../.git:/app/.git
      - ../docs:/app/docs
      - ./ssh-keys:/root/.ssh:ro
    env_file:
      - .env
